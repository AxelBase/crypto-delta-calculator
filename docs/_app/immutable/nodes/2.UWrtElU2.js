import{f as y,a as g,c as We}from"../chunks/CvLu7ONo.js";import"../chunks/CYKIonMI.js";import{w as $,d as oe,g as W,o as jt}from"../chunks/D-grwljs.js";import{l as Ee,aM as at,ad as rt,B as N,K as Ft,aN as qt,aO as Ot,t as Lt,aP as ot,aQ as Bt,b as Pe,at as Mt,a3 as zt,a5 as w,a7 as o,a6 as Gt,a9 as d,a4 as te,af as Ke,ae as Ht,aR as Ce,a8 as r,g as m,m as Vt,s as Wt}from"../chunks/ybdrdbDq.js";import{e as I,s as k}from"../chunks/Bv4ee2UH.js";import{i as U}from"../chunks/CzSRh_II.js";import{e as ae,i as Se}from"../chunks/DTl-YqbX.js";import{t as T,f as Qe,a as M,s as Kt}from"../chunks/DuF28Amg.js";import{h as Qt}from"../chunks/BLyS85tg.js";import{s as Ze,r as Je}from"../chunks/D6ZmUojg.js";import{i as Zt}from"../chunks/Ce2SWFmc.js";import{s as S,a as Jt,b as re,c as Xt}from"../chunks/CGGi52M6.js";import{b as Xe}from"../chunks/4qrAgGrw.js";function Yt(e,t,n){var s=e==null?"":""+e;return s===""?null:s}function ea(e,t,n,s,c,l){var u=e.__className;if(Ee||u!==n||u===void 0){var v=Yt(n);(!Ee||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=n}return l}function st(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Ft(t))return qt();for(var s of e.options)s.selected=t.includes(G(s));return}for(s of e.options){var c=G(s);if(Ot(c,t)){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ta(e){var t=new MutationObserver(()=>{st(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Lt(()=>{t.disconnect()})}function ke(e,t,n=t){var s=new WeakSet,c=!0;at(e,"change",l=>{var u=l?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(u),G);else{var _=e.querySelector(u)??e.querySelector("option:not([disabled])");v=_&&G(_)}n(v),N!==null&&s.add(N)}),rt(()=>{var l=t();if(e===document.activeElement){var u=ot??N;if(s.has(u))return}if(st(e,l,c),c&&l===void 0){var v=e.querySelector(":checked");v!==null&&(l=G(v),n(l))}e.__value=l,c=!1}),ta(e)}function G(e){return"__value"in e?e.__value:e.value}function Ye(e,t,n=t){var s=new WeakSet;at(e,"input",async c=>{var l=c?e.defaultValue:e.value;if(l=$e(e)?De(l):l,n(l),N!==null&&s.add(N),await Bt(),l!==(l=t())){var u=e.selectionStart,v=e.selectionEnd,_=e.value.length;if(e.value=l??"",v!==null){var E=e.value.length;u===v&&v===_&&E>_?(e.selectionStart=E,e.selectionEnd=E):(e.selectionStart=u,e.selectionEnd=Math.min(v,E))}}}),(Ee&&e.defaultValue!==e.value||Pe(t)==null&&e.value)&&(n($e(e)?De(e.value):e.value),N!==null&&s.add(N)),Mt(()=>{var c=t();if(e===document.activeElement){var l=ot??N;if(s.has(l))return}$e(e)&&c===De(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function $e(e){var t=e.type;return t==="number"||t==="range"}function De(e){return e===""?null:+e}const aa=!0,qa=Object.freeze(Object.defineProperty({__proto__:null,prerender:aa},Symbol.toStringTag,{value:"Module"})),nt="https://api.coingecko.com/api/v3";async function ra(){try{console.log("Starting fetchTop10");const e=await fetch(`${nt}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1&sparkline=false`);if(!e.ok)throw e.status===429?new Error("Rate limit exceeded. Try again later."):new Error(`API error: ${e.status}`);const t=await e.json();return console.log("fetchTop10 success:",t.length),t}catch(e){return console.error("Error in fetchTop10:",e),[]}}async function oa(e){try{console.log("Starting fetchPrices for ids:",e);const t=await fetch(`${nt}/simple/price?ids=${e.join(",")}&vs_currencies=usd,eur,gbp`);if(!t.ok)throw t.status===429?new Error("Rate limit exceeded. Try again later."):new Error(`API error: ${t.status}`);const n=await t.json();return console.log("fetchPrices success:",Object.keys(n)),n}catch(t){return console.error("Error in fetchPrices:",t),{}}}const Re=$([]),K=$({}),sa=["usd","eur","gbp"],Ae=$(0),Ue=$(0),j=$(""),z=$(""),H=$(""),et=$(""),V=$([]),Te=$("desc"),Ne=$(!0),it=$(""),tt=async()=>{try{Ne.set(!0),console.log("Starting loadData");const e=await ra();if(e.length===0)throw new Error("No top cryptos fetched.");const t=e.map(s=>s.id),n=await oa(t);if(Object.keys(n).length===0)throw new Error("No prices fetched.");Re.set(e),K.set(n),V.set(e.map(()=>({fiat:"usd",swapped:!1}))),W(j)||j.set(e[0].id),console.log("loadData success")}catch(e){console.error("Error in loadData:",e),it.set(e.message||"Failed to load live data. Please try refreshing.")}finally{Ne.set(!1)}},na=oe([Ae,j,K],([e,t,n])=>{try{console.log("Computing oldUsd");const s=n[t]?.usd||0;return e*s}catch(s){return console.error("Error in oldUsd derived:",s),0}}),ia=oe([Ue,z,K],([e,t,n])=>{try{console.log("Computing newUsd");const s=n[t]?.usd||0;return e*s}catch(s){return console.error("Error in newUsd derived:",s),0}}),lt=oe([na,ia],([e,t])=>{try{if(console.log("Computing percentageChange"),H.set(""),et.set(""),isNaN(e)||isNaN(t))return H.set("Prices must be valid numbers."),"";if(e===0)return H.set("Old price cannot be zero."),"";const n=(t-e)/e*100,s=`${n>0?"+":""}${n.toFixed(2)}%`;return n<=-50&&et.set("⚠️ Warning: This represents a significant price drop (>50%). Double-check your inputs."),s}catch(n){return console.error("Error in percentageChange derived:",n),""}});function la(){try{console.log("Starting copyResult");const e=W(lt),t=W(H);e&&!t&&navigator.clipboard.writeText(e).then(()=>console.log("Copied successfully")).catch(n=>console.error("Copy failed:",n))}catch(e){console.error("Error in copyResult:",e)}}const ca=oe([Re,K,V,Te],([e,t,n,s])=>{try{return console.log("Computing tableData"),e.map((c,l)=>{const u=n[l],v=t[c.id]?.[u.fiat]||0;let _=u.swapped?1/v||0:v,E=u.swapped?`1 ${u.fiat.toUpperCase()}`:`1 ${c.symbol.toUpperCase()}`,F=u.swapped?`${_.toFixed(8)} ${c.symbol.toUpperCase()}`:`${v.toFixed(2)} ${u.fiat.toUpperCase()}`;return{...c,value:_,left:E,right:F,fiat:u.fiat,swapped:u.swapped,index:l}}).sort((c,l)=>s==="desc"?l.value-c.value:c.value-l.value)}catch(c){return console.error("Error in tableData derived:",c),[]}});var da=y('<meta name="description" content="Free client-side calculator for cryptocurrency percentage changes with live CoinGecko data. Supports top 10 cryptos, cross-asset USD normalization, interactive conversion table, and satoshi precision."/> <meta name="keywords" content="crypto price calculator, percentage change crypto, bitcoin delta tool, live crypto prices, coingecko api tool, cryptocurrency converter"/> <meta name="robots" content="index, follow"/> <meta property="og:title" content="Crypto Price Change Calculator | Real-Time Delta Insights"/> <meta property="og:description" content="Compute accurate crypto percentage changes using live market data. Features top 10 rankings, multi-fiat table, and precision for small amounts."/> <meta property="og:type" content="website"/> <meta property="og:url"/> <meta property="og:image"/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title" content="Crypto Price Change Calculator"/> <meta name="twitter:description" content="Instant crypto deltas with live prices – client-side, private, and precise."/>',1),ua=y("<option>...</option>"),va=y("<option> </option>"),pa=y('<small class="ps-3 text-muted"> </small>'),ma=y("<option> </option>"),fa=y('<small class="ps-3 text-muted"> </small>'),ba=y('<div class="alert alert-danger bubbly-alert mt-2 svelte-1uha8ag"> </div>'),ga=y('<div class="alert glass-card border-0 d-flex justify-content-between align-items-center mt-3"><div class="d-flex flex-column"><span class="small text-muted">Resulting Change</span> <span> </span></div> <button class="btn btn-outline-secondary btn-sm rounded-pill px-3">Copy</button></div>'),ha=y("<!> <!>",1),ya=y('<div class="text-center py-5"><div class="spinner-border" style="color: var(--color-accent);" role="status"></div> <p class="mt-2 text-muted">Fetching prices...</p></div>'),_a=y('<div class="alert alert-warning bubbly-alert svelte-1uha8ag"> </div>'),wa=y("<option> </option>"),xa=y('<tr class="svelte-1uha8ag"><td class="ps-4 fw-bold text-gradient svelte-1uha8ag"> </td><td class="font-monospace small"> </td><td><select class="form-select form-select-sm mx-auto" style="max-width: 90px; border-radius: 12px !important;" aria-label="Select fiat currency"></select></td><td class="text-center"><button class="btn btn-sm btn-outline-accent svelte-1uha8ag" aria-label="Swap conversion order"><i class="bi bi-arrow-left-right"></i></button></td><td class="text-end pe-4 fw-bold font-monospace"> </td></tr>'),Ca=y('<div class="table-responsive"><table class="table table-hover align-middle svelte-1uha8ag"><thead><tr class="text-muted small text-uppercase"><th class="border-0 ps-4">Crypto</th><th class="border-0">Conversion</th><th class="border-0 text-center">Currency</th><th class="border-0 text-center">Swap</th><th class="border-0 text-end pe-4">Value <button class="btn btn-link p-0 text-decoration-none" style="color: var(--color-accent);" aria-label="Sort table"> </button></th></tr></thead><tbody class="svelte-1uha8ag"></tbody></table></div>'),Sa=y(`<div class="container py-5 mt-5"><div class="row justify-content-center mb-5"><div class="col-lg-6"><div class="text-center mb-5"><h1 class="display-4 fw-800 svelte-1uha8ag" style="color: var(--color-accent); letter-spacing: -2px;">Crypto Delta</h1> <p class="text-muted">Calculate market shifts with bubbly precision.</p></div> <div class="glass-card p-4 p-md-5 mb-4"><form><div class="mb-4"><label for="oldAmount" class="form-label fw-bold small text-uppercase tracking-wider svelte-1uha8ag">Starting Investment</label> <div class="input-group bubbly-group svelte-1uha8ag"><input type="number" class="form-control" id="oldAmount" step="any" min="0" required/> <select class="form-select" style="max-width: 130px;" aria-label="Select starting cryptocurrency"><!></select></div> <!></div> <div class="mb-4"><label for="newAmount" class="form-label fw-bold small text-uppercase tracking-wider svelte-1uha8ag">New Portfolio Value</label> <div class="input-group bubbly-group svelte-1uha8ag"><input type="number" class="form-control" id="newAmount" step="any" min="0" required/> <select class="form-select" style="max-width: 130px;" aria-label="Select target cryptocurrency"><option>Same</option><!></select></div> <!></div> <button type="submit" class="btn btn-primary w-100 py-3 mb-3 shadow-sm">Calculate Change</button></form> <!> <button class="btn btn-link w-100 mt-3 text-decoration-none small" style="color: var(--color-accent);"><i class="bi bi-arrow-clockwise"></i> Refresh Live Data</button></div></div></div> <div class="row mb-5"><div class="col-12"><div class="glass-card p-4"><div class="d-flex justify-content-between align-items-center mb-4 px-2"><h2 class="h4 fw-bold mb-0">Live Market <span class="text-muted fw-normal" style="font-size: 0.9rem;">(Top 10)</span></h2> <button class="btn btn-primary btn-sm px-3" aria-label="Sync market data"><i class="bi bi-lightning-charge-fill"></i> Sync</button></div> <!></div></div></div> <div class="row g-4 mb-5"><div class="col-md-4" id="about"><div class="glass-card p-4 h-100 shadow-lg border-0"><h3 class="h5 fw-bold mb-3" style="color: var(--color-accent);"><i class="bi bi-info-circle-fill me-2"></i>About the Crypto Price Change Calculator</h3> <p class="small text-muted lh-lg mb-0">Launched in late 2025, the Crypto Price Change Calculator is a sophisticated, fully client-side web utility engineered for precision in cryptocurrency analysis. It empowers users to compute accurate percentage changes between any two holdings from the live top 10 by market cap (Bitcoin currently ~$87,000 USD as of December 19, 2025). <br/><br/> Featuring automatic USD normalization for cross-asset comparisons, an interactive multi-fiat conversion table (USD/EUR/GBP with per-row swapping and sorting), satoshi-level precision, real-time previews, and robust warnings, it delivers professional insights without any data collection. <br/><br/> Built as a stateless static site with SvelteKit and deployed on GitHub Pages, all dynamic features run seamlessly in your browser via CoinGecko's public API – ensuring speed, privacy, and global accessibility.</p></div></div> <div class="col-md-4" id="how-to-use"><div class="glass-card p-4 h-100 shadow-lg border-0"><h3 class="h5 fw-bold mb-3" style="color: var(--color-accent);"><i class="bi bi-controller me-2"></i>How to Use</h3> <p class="small text-muted lh-lg mb-0">Enter your <strong>Old Amount</strong> and <strong>New Amount</strong> with full decimal precision (e.g., 0.0000025 BTC). Select cryptocurrencies from the live top 10 dropdowns – the new defaults to the old for convenience. <br/><br/> Instant USD previews update as you type. Click <strong>Calculate</strong> for the percentage delta (auto-converted to USD if different coins). Results include warnings for >50% drops and a copy button. <br/><br/> Below, explore the <strong>Live Conversion Table</strong>: switch fiats per row, click <strong>Swap</strong> to reverse direction (up to 8 decimals), and sort by value. Hit <strong>Refresh Live Data</strong> anytime for fresh market rates. <br/><br/> Perfect for portfolio tracking, trade evaluation, or sat-stacking analysis – all client-side, private, and lightning-fast.</p></div></div> <div class="col-md-4" id="faq"><div class="glass-card p-4 h-100 shadow-lg border-0"><h3 class="h5 fw-bold mb-3" style="color: var(--color-accent);"><i class="bi bi-patch-question-fill me-2"></i>FAQ Highlights</h3> <p class="small text-muted lh-lg mb-0"><strong>Data source:</strong> CoinGecko public API – reliable aggregated prices.<br/><br/> <strong>Update frequency:</strong> On page load or manual refresh.<br/><br/> <strong>Cross-coin accuracy:</strong> USD normalization ensures true value-based percentages.<br/><br/> <strong>Offline capable:</strong> Core calculations work without internet; live features need connection.<br/><br/> <strong>Precision:</strong> Unlimited decimals for satoshis and micro-holdings.<br/><br/> <strong>Privacy:</strong> Zero tracking, cookies, or data collection.<br/><br/> <strong>Deployment:</strong> Static on GitHub Pages – live features fully functional via client-side API calls.<br/><br/> <strong>Not financial advice:</strong> Informational tool only.</p></div></div></div></div>`);function Oa(e,t){zt(t,!1);const n=()=>S(Ae,"$oldAmount",x),s=()=>S(j,"$oldCrypto",x),c=()=>S(Ne,"$loading",x),l=()=>S(Re,"$topCryptos",x),u=()=>S(K,"$prices",x),v=()=>S(Ue,"$newAmount",x),_=()=>S(z,"$newCrypto",x),E=()=>S(H,"$error",x),F=()=>S(lt,"$percentageChange",x),Ie=()=>S(it,"$loadError",x),ct=()=>S(Te,"$sortDir",x),dt=()=>S(ca,"$tableData",x),Q=()=>S(V,"$tableSettings",x),[x,ut]=Jt();let je=Vt(!1);jt(async()=>{try{await tt()}catch(a){console.error("Error in onMount:",a)}});function vt(a){a.preventDefault(),W(z)===""&&z.set(W(j)),Wt(je,!0)}function pt(){Te.update(a=>a==="desc"?"asc":"desc")}function mt(a){V.update(i=>(i[a].swapped=!i[a].swapped,[...i]))}function Fe(){tt()}Zt();var se=Sa();Qt("1uha8ag",a=>{var i=da(),p=d(te(i),12),C=d(p,2);Ke(6),w(()=>{Ze(p,"content",`${Xe??""}/`),Ze(C,"content",`${Xe??""}/og-image.jpg`)}),rt(()=>{Ht.title="Crypto Price Change Calculator | Live Delta Tool"}),g(a,i)});var Z=o(se),qe=o(Z),Oe=o(qe),ne=d(Oe,2),J=o(ne),ie=o(J),le=d(o(ie),2),ce=o(le);Je(ce);var de=d(ce,2);w(()=>{s(),Ce(()=>{c(),l()})});var ft=o(de);{var bt=a=>{var i=ua();g(a,i)},gt=a=>{var i=We(),p=te(i);ae(p,1,l,Se,(C,P)=>{var h=va(),f=o(h,!0);r(h);var b={};w(D=>{k(f,D),b!==(b=m(P).id)&&(h.value=(h.__value=m(P).id)??"")},[()=>m(P).symbol.toUpperCase()]),g(C,h)}),g(a,i)};U(ft,a=>{c()?a(bt):a(gt,!1)})}r(de),r(le);var ht=d(le,2);{var yt=a=>{var i=pa(),p=o(i);r(i),w(C=>k(p,`≈ ${C??""} USD`),[()=>(n()*u()[s()].usd).toLocaleString()]),g(a,i)};U(ht,a=>{s()&&u()[s()]&&!c()&&a(yt)})}r(ie);var Le=d(ie,2),ue=d(o(Le),2),ve=o(ue);Je(ve);var pe=d(ve,2);w(()=>{_(),Ce(()=>{l()})});var me=o(pe);me.value=me.__value="";var _t=d(me);ae(_t,1,l,Se,(a,i)=>{var p=ma(),C=o(p,!0);r(p);var P={};w(h=>{k(C,h),P!==(P=m(i).id)&&(p.value=(p.__value=m(i).id)??"")},[()=>m(i).symbol.toUpperCase()]),g(a,p)}),r(pe),r(ue);var wt=d(ue,2);{var xt=a=>{var i=fa(),p=o(i);r(i),w(C=>k(p,`≈ ${C??""} USD`),[()=>(v()*u()[_()].usd).toLocaleString()]),g(a,i)};U(wt,a=>{_()&&u()[_()]&&!c()&&a(xt)})}r(Le),Ke(2),r(J);var Be=d(J,2);{var Ct=a=>{var i=ha(),p=te(i);{var C=f=>{var b=ba(),D=o(b,!0);r(b),w(()=>k(D,E())),T(3,b,()=>Kt),g(f,b)};U(p,f=>{E()&&f(C)})}var P=d(p,2);{var h=f=>{var b=ga(),D=o(b),R=d(o(D),2),Y=o(R,!0);r(R),r(D);var q=d(D,2);r(b),w(O=>{ea(R,1,`fs-3 fw-bold ${O??""}`),k(Y,F())},[()=>F().startsWith("-")?"text-danger":"text-success"]),I("click",q,function(...O){la?.apply(this,O)}),T(3,b,()=>M),g(f,b)};U(P,f=>{F()&&!E()&&f(h)})}g(a,i)};U(Be,a=>{m(je)&&a(Ct)})}var St=d(Be,2);r(ne),r(qe),r(Z);var X=d(Z,2),Me=o(X),ze=o(Me),fe=o(ze),kt=d(o(fe),2);r(fe);var $t=d(fe,2);{var Dt=a=>{var i=ya();g(a,i)},Et=a=>{var i=We(),p=te(i);{var C=h=>{var f=_a(),b=o(f,!0);r(f),w(()=>k(b,Ie())),g(h,f)},P=h=>{var f=Ca(),b=o(f),D=o(b),R=o(D),Y=d(o(R),4),q=d(o(Y)),O=o(q,!0);r(q),r(Y),r(R),r(D);var Ge=d(D);ae(Ge,5,dt,be=>be.index,(be,A)=>{var ee=xa(),ge=o(ee),At=o(ge,!0);r(ge);var he=d(ge),Ut=o(he);r(he);var ye=d(he),_e=o(ye);w(()=>{Q(),Ce(()=>{m(A)})}),ae(_e,5,()=>sa,Se,(L,xe)=>{var B=wa(),Rt=o(B,!0);r(B);var Ve={};w(It=>{k(Rt,It),Ve!==(Ve=m(xe))&&(B.value=(B.__value=m(xe))??"")},[()=>m(xe).toUpperCase()]),g(L,B)}),r(_e),r(ye);var we=d(ye),Tt=o(we);r(we);var He=d(we),Nt=o(He,!0);r(He),r(ee),w(L=>{k(At,m(A).name),k(Ut,`${m(A).left??""} = ${m(A).right??""}`),k(Nt,L)},[()=>m(A).value.toFixed(m(A).swapped?8:2)]),ke(_e,()=>Q()[m(A).index].fiat,L=>Xt(V,Pe(Q)[m(A).index].fiat=L,Pe(Q))),I("click",Tt,()=>mt(m(A).index)),T(3,ee,()=>M),g(be,ee)}),r(Ge),r(b),r(f),w(()=>k(O,ct()==="desc"?"↓":"↑")),I("click",q,pt),g(h,f)};U(p,h=>{Ie()?h(C):h(P,!1)},!0)}g(a,i)};U($t,a=>{c()?a(Dt):a(Et,!1)})}r(ze),r(Me),r(X);var Pt=d(X,2);r(se),T(1,Oe,()=>Qe,()=>({y:-20,duration:800})),Ye(ce,n,a=>re(Ae,a)),ke(de,s,a=>re(j,a)),Ye(ve,v,a=>re(Ue,a)),ke(pe,_,a=>re(z,a)),I("submit",J,vt),I("click",St,Fe),T(1,ne,()=>Qe,()=>({y:40,duration:1e3})),T(1,Z,()=>M,()=>({duration:800})),I("click",kt,Fe),T(1,X,()=>M,()=>({delay:400})),T(1,Pt,()=>M,()=>({delay:600})),g(e,se),Gt(),ut()}export{Oa as component,qa as universal};
